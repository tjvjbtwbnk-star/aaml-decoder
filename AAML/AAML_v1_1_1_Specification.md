# AAML v1.1.1 — AI-Native Arbitration Markup Language
**Core Specification**

---

## 1. Introduction

### 1.1 Purpose

AAML (AI-Native Arbitration Markup Language) is a lightweight markup standard for drafting international arbitration submissions. It is designed to be:

- **Human-readable and writable** using familiar Markdown conventions
- **Reliably generated by LLMs** with minimal instruction
- **Convertible to professional outputs** (Word, PDF) with proper numbering, formatting, and footnotes

### 1.2 Scope

AAML addresses three core problems in arbitration drafting:

1. **Syntax** — How to structure submissions with headings, formatting, and block elements
2. **Reference Management** — How to cite exhibits, authorities, and other case documents symbolically
3. **Numbering** — How to number paragraphs, sections, and exhibits consistently

AAML does not prescribe how content is stored, how numbering algorithms work internally, or institution-specific formatting rules (ICC, LCIA, ICSID, etc.). These are implementation concerns.

### 1.3 Two Modes

AAML operates in two distinct modes:

| Mode | Purpose | Who/What Uses It |
|------|---------|------------------|
| **Output Mode** | Writing and generating submission text | Humans, LLMs |
| **Production Mode** | Converting to final deliverables | Production engine |

This separation is fundamental. Authors (human or LLM) work exclusively in Output Mode. They never manually number paragraphs, assign exhibit numbers, or format footnotes. All of that happens in Production Mode.

---

## 2. Output Mode

Output Mode is the authoring environment. Text produced in Output Mode is plain Markdown with AAML reference syntax.

### 2.1 Design Principles

1. **No numbering** — Paragraphs, sections, and exhibits are not numbered in Output Mode
2. **Symbolic references** — All citations use identifiers or aliases, never production numbers
3. **Standard Markdown** — Headings, formatting, and block elements use familiar Markdown syntax
4. **No footnotes in source** — Citations are inline; footnotes are a Production Mode concern

### 2.2 Syntax

#### 2.2.1 Headings

AAML supports six levels of headings using standard Markdown:

```markdown
# Level 1 Heading
## Level 2 Heading
### Level 3 Heading
#### Level 4 Heading
##### Level 5 Heading
###### Level 6 Heading
```

Headings may include an anchor for cross-referencing (see Section 2.3.2):

```markdown
## Jurisdiction and Admissibility {#jurisdiction}
```

#### 2.2.2 Text Formatting

| Format | Syntax | Example |
|--------|--------|---------|
| Bold | `**text**` | **bold text** |
| Italic | `_text_` or `*text*` | _italic text_ |

Note: Underline is not supported in standard Markdown. If underline is required, implementations may support `<u>text</u>` HTML syntax, but this is not guaranteed.

#### 2.2.3 Block Quotes

Use `>` for block quotations:

```markdown
> The Tribunal finds that the Respondent's conduct constituted a 
> breach of the fair and equitable treatment standard.
```

#### 2.2.4 Tables

Use standard Markdown table syntax:

```markdown
| Date | Event | Impact |
|------|-------|--------|
| 2019-01-15 | Permit delay | +14 days |
| 2019-02-02 | Access restriction | +9 days |
```

#### 2.2.5 Figures and Images

Use standard Markdown image syntax:

```markdown
![Site Plan](assets/site-plan.png)
```

For figures that require captions or numbering in production, use the figure reference syntax (see Section 2.3.3).

### 2.3 References

References are the core feature of AAML. They allow authors to cite documents symbolically, with resolution to production numbers happening later.

#### 2.3.1 Document References

**Syntax:**

```
[[identifier]]
[[identifier|pinpoint]]
```

Where:
- `identifier` is a unique ID or alias defined in the Reference List
- `pinpoint` is an optional location within the document (page, paragraph, clause, etc.)

**Examples:**

```markdown
The Respondent failed to provide timely access. [[3E39|p. 2]]

Under the Contract, access was to be granted within 14 days. [[contract|cl. 8.3]]

The tribunal in Tecmed emphasized the importance of legitimate expectations. [[tecmed|para. 154]]
```

**Identifier Resolution:**

The production engine resolves identifiers in this order:
1. Exact filename match (e.g., `Letter from Claimant to Respondent.pdf`)
2. Unique ID / UID (e.g., `3E39`)
3. Alias (e.g., `contract`, `tecmed`)

**Simplest Usage — Filename Reference:**

```markdown
The Respondent acknowledged the delay. [[Letter from Respondent re Site Access.pdf|p. 2]]
```

Users can copy-paste the document filename directly. The production engine locates the file and reads its metadata from the YAML header. This is the easiest method for users who don't want to manage IDs or aliases.

If no match is found, the production engine should raise an error.

#### 2.3.2 Internal References (Cross-References)

To reference a location within the same document, use the `#` prefix:

```
[[#anchor]]
[[#anchor|additional context]]
```

**Creating Anchors:**

Anchors are created by appending `{#anchor-name}` to a heading or paragraph:

```markdown
## The Respondent's Breach of Contract {#breach}

The Respondent failed to perform its obligations under Article 5. {#art5-breach}
```

**Referencing Anchors:**

```markdown
As discussed above at [[#breach]], the Respondent's conduct was inexcusable.

See [[#art5-breach|para. 45]] for the detailed analysis.
```

In Production Mode, internal references resolve to section or paragraph numbers (e.g., "Section III.A" or "paragraph 45").

#### 2.3.3 Figure and Table References

Figures and tables that require numbering should be referenced symbolically:

```markdown
As shown in [[fig:site-plan]], the access road was blocked.

The delay events are summarized in [[tbl:delay-summary]].
```

The `fig:` and `tbl:` prefixes distinguish figures and tables from document references.

### 2.4 Document Types

AAML recognizes the following document categories for reference management:

| Category | Description | Typical Prefix |
|----------|-------------|----------------|
| Fact Exhibits | Documentary evidence | C-, R- |
| Legal Authorities | Cases, treaties, commentary | CL-, RL- |
| Witness Statements | Factual witness evidence | CWS-, RWS- |
| Expert Reports | Expert evidence | CER-, RER- |
| Procedural Documents | Orders, submissions, correspondence | PO-, etc. |

Procedural documents include:
- Procedural orders issued by the tribunal or institution
- Parties' written submissions (memorials, counter-memorials, etc.)
- Procedural correspondence

The Reference List assigns each document to a category and tracks its production number.

### 2.5 LLM Output Format

#### 2.5.1 Mandatory Code Block Wrapper

**When LLMs generate AAML text, they MUST output in code block format:**

````
```markdown
# Section Title

The Respondent breached its obligations under the Contract. [[contract|cl. 8.3]]
```
````

#### 2.5.2 Rationale

This format requirement ensures:
- **Text is not accidentally rendered** in chat interfaces
- **Syntax remains visible** – users see `**bold**` not bold text
- **Easy copy-paste** for users
- **Clear delineation** of AAML content from conversational text

#### 2.5.3 Wrong vs. Right

**❌ WRONG (Plain text, will render):**

```
# Statement of Facts

The Contract required access. **This renders as bold.**
```

**✅ CORRECT (Code block, shows syntax):**

````
```markdown
# Statement of Facts

The Contract required access. **This shows the asterisks.**
```
````

#### 2.5.4 LLM Instructions

LLMs must be instructed to:
1. Always wrap AAML output in ```markdown code blocks
2. Never output rendered Markdown (no actual bold, headers, etc.)
3. Show all syntax literally (`[[`, `**`, `#`, etc.)
4. Use only identifiers from the Reference List
5. Never use production numbers (C-1, R-1, etc.) or footnote syntax ([^1])

The AAML LLM Prompt Card provides detailed instructions for this purpose.

---

## 3. Production Mode

Production Mode converts AAML source into final deliverables (Word, PDF, HTML). This section describes the requirements for a compliant production engine.

### 3.1 Inputs

A production engine requires:

1. **AAML source document(s)** — The submission text in Output Mode format
2. **Reference metadata** — Document information for identifier resolution

Reference metadata can be provided in two ways:

| Mode | When to Use | How It Works |
|------|-------------|--------------|
| **Reference List** | Many documents, complex case | Separate Markdown file with all document metadata |
| **Document Headers** | Smaller case, simpler workflow | YAML headers embedded in each source document |

The production engine should support both modes. If a Reference List is provided, it takes precedence. If not, the engine reads YAML headers directly from documents in the designated folders.

### 3.1.1 Document YAML Headers

Each source document (exhibit, authority, witness statement, etc.) may include a YAML header with metadata:

```yaml
---
uid: 3E39
title: "Letter from Claimant to Respondent re Site Access"
date: 2024-03-15
type: exhibit
party: claimant
aliases:
  - site access letter
  - march letter
---
```

**Required Fields:**

| Field | Description |
|-------|-------------|
| `uid` | Unique identifier (4 characters recommended for quick reference) |
| `title` | Display title as it should appear in footnotes/citations |
| `type` | Document type: `exhibit`, `authority`, `witness`, `expert`, `procedural` |

**Optional Fields:**

| Field | Description |
|-------|-------------|
| `party` | `claimant` or `respondent` |
| `date` | Document date (ISO 8601: YYYY-MM-DD) |
| `citation` | Full legal citation (for authorities) |
| `aliases` | List of alternative identifiers for natural-language referencing |

**File Organization:**

Documents should be stored in designated folders:
- `exhibits/` — Fact exhibits
- `authorities/` — Legal authorities
- `witness/` — Witness statements
- `experts/` — Expert reports
- `procedural/` — Procedural documents

The production engine scans these folders, reads YAML headers, and builds the reference index automatically.

### 3.1.2 Filename-Based References

For maximum simplicity, AAML supports referencing documents by filename:

```markdown
The Claimant requested access on 1 March 2024. [[Letter from Claimant to Respondent re Site Access.pdf]]
```

The production engine resolves this by:
1. Searching the designated folders for a file with that exact name
2. Reading the document's YAML header
3. Extracting the title and UID for citation formatting

**Why This Works:**
- Users don't need to remember IDs or aliases
- Copy-paste the filename directly from the file system
- The filename IS the reference — no translation needed

**Resolution Priority:**
1. Exact filename match (including extension)
2. Filename without extension
3. UID match
4. Alias match

### 3.1.3 Data Format Interoperability

For advanced implementations, document metadata may be stored in JSON format for programmatic access:

```json
{
  "uid": "3E39",
  "title": "Letter from Claimant to Respondent re Site Access",
  "date": "2024-03-15",
  "type": "exhibit",
  "party": "claimant",
  "aliases": ["site access letter", "march letter"]
}
```

The YAML header format is preferred for human readability. JSON may be used for:
- Large document sets requiring efficient parsing
- Integration with case management systems
- API-based document registration

Both formats contain the same fields and are interchangeable

### 3.2 Reference List Format (Optional)

The Reference List is a Markdown file consolidating metadata for all case documents. It is **optional** when documents contain embedded YAML headers (see Section 3.1.1).

**When to Use a Reference List:**
- Large cases with many documents (faster than reading individual headers)
- Need to control document ordering explicitly
- Working with documents that cannot have embedded headers (e.g., scanned PDFs)
- Multiple team members need a shared source of truth

**When Document Headers Are Sufficient:**
- Smaller cases with limited documents
- Documents already have YAML headers from intake
- Simpler workflow preferred

**Critical Principle:** The Reference List uses descriptive headings and symbolic identifiers ONLY. Production numbers (C-1, CL-1, R-1, etc.) are NOT present in the source Reference List. They are assigned automatically by the production engine based on:
- Document order within each category
- Party designation (claimant vs. respondent)
- Document type (exhibit, authority, witness, expert, procedural)

**Structure:**

```markdown
# Reference List

## Fact Exhibits

### Construction Contract
---
id: contract-2018
type: exhibit
party: claimant
title: Construction Contract
date: 2018-03-01
file: exhibits/construction-contract.pdf
aliases:
  - contract
  - the contract
  - main contract
---

### Site Access Email
---
id: site-email-march
type: exhibit
party: claimant
title: Email re Site Access
date: 2024-03-15
file: exhibits/site-access-email.pdf
aliases:
  - site access email
  - march 2024 email
---

## Legal Authorities

### Tecmed v. Mexico
---
id: tecmed-award
type: authority
title: Técnicas Medioambientales Tecmed S.A. v. United Mexican States
citation: ICSID Case No. ARB(AF)/00/2, Award (29 May 2003)
file: authorities/tecmed-v-mexico.pdf
aliases:
  - tecmed
  - tecmed v mexico
---
```

**Note:** Document headings use descriptive titles, NOT production numbers (C-1, C-2, etc.). The production engine assigns numbers automatically based on document order and party designation.

**Required Fields:**

| Field | Description |
|-------|-------------|
| `id` | Unique identifier (alphanumeric, no spaces) |
| `type` | Document type: `exhibit`, `authority`, `witness`, `expert`, `procedural` |
| `title` | Human-readable document title |

**Optional Fields:**

| Field | Description |
|-------|-------------|
| `party` | `claimant` or `respondent` |
| `date` | Document date (ISO 8601 format) |
| `file` | Path to source file |
| `citation` | Full citation (for authorities) |
| `aliases` | List of alternative identifiers |

### 3.3 Numbering

The production engine is responsible for all numbering:

#### 3.3.1 Paragraph Numbering

Every paragraph in the submission receives a sequential number. Numbering is continuous throughout the document (1, 2, 3, ...) unless the implementation specifies otherwise.

#### 3.3.2 Section Numbering

Headings are numbered hierarchically. The specific format is implementation-defined, but common schemes include:

- Roman numerals for Level 1: I, II, III, ...
- Capital letters for Level 2: A, B, C, ...
- Arabic numerals for Level 3: 1, 2, 3, ...
- Lowercase letters for Level 4: a, b, c, ...
- Lowercase Roman for Level 5: i, ii, iii, ...
- Parenthetical numbers for Level 6: (1), (2), (3), ...

Example: Section III.B.2.a

#### 3.3.3 Exhibit Numbering

Exhibits are numbered by party and sequence:
- Claimant exhibits: C-1, C-2, C-3, ...
- Respondent exhibits: R-1, R-2, R-3, ...

Legal authorities follow a similar pattern:
- Claimant authorities: CL-1, CL-2, ...
- Respondent authorities: RL-1, RL-2, ...

The Reference List determines the order and assignment of numbers.

### 3.4 Citation Rendering

The production engine converts inline references to formatted citations:

**Input (Output Mode):**
```markdown
The Respondent failed to provide access. [[3E39|p. 2]]
```

**Output (Production Mode):**
```
The Respondent failed to provide access.¹

_______________
¹ Exhibit C-1, p. 2.
```

The engine may render citations as:
- Footnotes (most common in arbitration)
- Endnotes
- Inline parenthetical citations

The specific format is implementation-defined.

### 3.5 Internal Reference Resolution

Internal references resolve to production numbers:

**Input:**
```markdown
As discussed above at [[#breach]], ...
```

**Output:**
```
As discussed above at Section III.A, ...
```

Or, if referencing a paragraph:
```
As discussed above at paragraph 45, ...
```

### 3.6 List Generation

The production engine should be capable of generating:

- List of Exhibits (by party)
- List of Legal Authorities (by party)
- List of Witness Statements
- List of Expert Reports
- Table of Contents

These are generated from the Reference List metadata.

---

## 4. Validation

### 4.1 Errors (Must Fail)

- **Unknown identifier** — Reference to an ID/alias not in the Reference List
- **Duplicate ID** — Same ID used for multiple documents
- **Missing anchor** — Internal reference to undefined anchor
- **Invalid syntax** — Malformed reference brackets

### 4.2 Warnings (Should Report)

- **Orphan anchors** — Anchors defined but never referenced
- **Orphan documents** — Documents in Reference List never cited
- **Ambiguous alias** — Alias matches multiple documents

---

## 5. Identifier Rules

Identifiers (IDs and aliases) must conform to these rules:

| Rule | Valid | Invalid |
|------|-------|---------|
| Alphanumeric, hyphens, underscores | `3E39`, `main-contract` | `3E39!`, `main contract` |
| Case-insensitive matching | `Tecmed` = `tecmed` | — |
| No leading/trailing whitespace | `contract` | ` contract ` |
| Unique within Reference List | — | Duplicate IDs |

Aliases may contain spaces for natural language matching (e.g., "the contract"), but the production engine normalizes them for comparison.

---

## 6. Pinpoint Conventions

Pinpoints specify locations within documents. Common formats:

| Type | Format | Example |
|------|--------|---------|
| Page | `p.` or `pp.` | `p. 5`, `pp. 12-14` |
| Paragraph | `para.` or `paras.` | `para. 154`, `paras. 52-58` |
| Clause | `cl.` | `cl. 8.3` |
| Article | `Art.` | `Art. 31(1)` |
| Section | `§` or `sec.` | `§ 12`, `sec. 5.2` |

Pinpoints must not contain: `|`, `[`, `]`, or newlines.

---

## 7. Complete Example

### 7.1 Source Document (Output Mode)

**Note:** When generated by an LLM, this would be wrapped in a ```markdown code block.

```markdown
# Statement of Facts {#facts}

## Background {#background}

The Claimant and Respondent entered into a Construction Contract on 1 March 2018. [[contract]] Under the Contract, the Respondent was obligated to provide access to the Site within 14 days of the Claimant's written request. [[contract|cl. 8.3]]

## The Access Delays {#delays}

On 1 March 2024, the Claimant formally requested access to the Site. [[site-access-request]] The Respondent failed to respond within the contractual timeframe. {#first-breach}

On 15 March 2024, the Respondent acknowledged that access had not been provided and stated that permits were "still being processed." [[3E39|p. 2]] This admission confirms that the delay was within the Respondent's control.

As discussed at [[#first-breach]], the Respondent's failure to act constitutes a clear breach of its contractual obligations.

# Legal Analysis {#legal}

## Applicable Standard {#standard}

The fair and equitable treatment standard requires host States to act in good faith and respect investors' legitimate expectations. [[tecmed|para. 154]] The Respondent's conduct falls far short of this standard.
```

### 7.2 Reference List

```markdown
# Reference List

## Fact Exhibits

### Construction Contract
---
id: contract-2018
type: exhibit
party: claimant
title: Construction Contract
date: 2018-03-01
aliases:
  - contract
  - the contract
---

### Site Access Request
---
id: access-request-march
type: exhibit
party: claimant
title: Request for Site Access
date: 2024-03-01
aliases:
  - site-access-request
---

### March Email
---
id: march-email-2024
type: exhibit
party: claimant
title: Email re Site Access
date: 2024-03-15
aliases:
  - march email
---

## Legal Authorities

### Tecmed v. Mexico
---
id: tecmed-award
type: authority
title: Técnicas Medioambientales Tecmed S.A. v. United Mexican States
citation: ICSID Case No. ARB(AF)/00/2, Award (29 May 2003)
aliases:
  - tecmed
---
```

**Note:** The production engine reads this list and assigns C-1, C-2, C-3 to the claimant exhibits in order, and CL-1 to the first claimant authority.

### 7.3 Production Output (Illustrative)

```
I.    STATEMENT OF FACTS

      A.    Background

1.    The Claimant and Respondent entered into a Construction Contract on 
      1 March 2018.¹ Under the Contract, the Respondent was obligated to 
      provide access to the Site within 14 days of the Claimant's written 
      request.²

      B.    The Access Delays

2.    On 1 March 2024, the Claimant formally requested access to the Site.³ 
      The Respondent failed to respond within the contractual timeframe.

3.    On 15 March 2024, the Respondent acknowledged that access had not been 
      provided and stated that permits were "still being processed."⁴ This 
      admission confirms that the delay was within the Respondent's control.

4.    As discussed at paragraph 2, the Respondent's failure to act constitutes 
      a clear breach of its contractual obligations.

II.   LEGAL ANALYSIS

      A.    Applicable Standard

5.    The fair and equitable treatment standard requires host States to act 
      in good faith and respect investors' legitimate expectations.⁵ The 
      Respondent's conduct falls far short of this standard.

_______________
¹ Exhibit C-1.
² Exhibit C-1, cl. 8.3.
³ Exhibit C-2.
⁴ Exhibit C-3, p. 2.
⁵ Tecmed v. Mexico, para. 154.
```

---

## 8. Reserved Syntax

The following syntax elements are reserved for AAML:

| Syntax | Purpose |
|--------|---------|
| `[[...]]` | Document references |
| `[[#...]]` | Internal references |
| `[[fig:...]]` | Figure references |
| `[[tbl:...]]` | Table references |
| `{#...}` | Anchor definitions |

Implementations must not repurpose these for other uses.

---

## 9. Conformance

An implementation claims AAML v1.1 conformance if it:

1. Accepts documents written in Output Mode syntax
2. Resolves references against a Reference List
3. Produces numbered output with formatted citations
4. Reports validation errors and warnings as specified

Implementations may extend AAML with additional features provided they do not conflict with reserved syntax.

---

## 10. Changes from v1.0

**Version 1.1 changes:**
- **CRITICAL FIX:** Removed all production numbers (C-1, CL-1, etc.) from Reference List format - these are now assigned automatically by the production engine
- Reference List now uses only descriptive headings and symbolic identifiers
- Added explicit LLM output format requirements (Section 2.5)
- Emphasized code block wrapper requirement for LLM-generated content
- Added wrong vs. right examples for LLM output
- Clarified that production numbers are assigned during Production Mode, not present in source documents
- Added note to examples showing production number assignment process

**Version 1.1.1 changes:**
- **NEW:** Document YAML headers — metadata can now be embedded directly in source documents (Section 3.1.1)
- **NEW:** Dual-mode reference resolution — production engine can use either a Reference List OR read headers from documents directly
- **NEW:** Filename-based references — users can reference documents by copy-pasting filenames (Section 3.1.2)
- **NEW:** JSON interoperability — metadata format compatible with JSON for programmatic access (Section 3.1.3)
- Reference List is now optional when documents have embedded YAML headers
- Updated identifier resolution order to prioritize filename matches
- Simplified workflow for smaller cases

---

*End of AAML v1.1.1 Specification*
